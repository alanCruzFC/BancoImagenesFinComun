<form (ngSubmit)="submit()" class="space-y-4 p-4">
  <h2 class="text-xl font-semibold mb-4">
    {{ formData.id ? 'Actualizar API Key' : 'Crear nueva API Key' }}
  </h2>

  <!-- Consumidor -->
  <label for="consumidor" class="font-semibold text-[#046CAC]">Consumidor:</label>
  <input id="consumidor"
       [(ngModel)]="formData.consumidor"
       name="consumidor"
       placeholder="nombre del consumidor"
       autocomplete="off"
       aria-label="Nombre del consumidor"
       (input)="formData.consumidor = formData.consumidor.toUpperCase()"
       class="w-full border border-gray-300 px-4 py-2 rounded-lg 
              placeholder:lowercase uppercase"
       required
       [class.border-red-500]="hasError('Consumidor')" />

  <!-- Clave (solo visible en edici贸n) -->
  <div *ngIf="formData.id" class="flex items-end space-x-2 mt-4">
    <div class="flex-1">
      <label for="clave" class="font-semibold text-[#046CAC]">Clave:</label>
      <input [type]="claveVisible ? 'text' : 'password'"
             id="clave"
             [(ngModel)]="formData.clave"
             name="clave"
             class="w-full border px-4 py-2 rounded font-mono"
             readonly />
    </div>
    <button type="button"
            (click)="toggleClave()"
            class="bg-blue-600 text-white px-3 py-2 rounded hover:bg-blue-700">
      {{ claveVisible ? 'Ocultar' : 'Ver' }}
    </button>
    <button *ngIf="formData.id"
            type="button"
            (click)="refactorizarClave()"
            class="bg-green-600 text-white px-3 py-2 rounded hover:bg-green-700">
       Refactorizar
    </button>
  </div>

  <!-- Permisos -->
  <h3 class="text-lg font-semibold mt-4">Permisos:</h3>

  <label class="flex items-center space-x-2">
    <input type="checkbox" [(ngModel)]="formData.lectura" name="lectura" />
    <span>Lectura</span>
  </label>

  <label class="flex items-center space-x-2">
    <input type="checkbox" [(ngModel)]="formData.escritura" name="escritura" />
    <span>Escritura</span>
  </label>

  <label class="flex items-center space-x-2">
    <input type="checkbox" [(ngModel)]="formData.actualizacion" name="actualizacion" />
    <span>Actualizaci贸n</span>
  </label>

  <label class="flex items-center space-x-2">
    <input type="checkbox" [(ngModel)]="formData.eliminacion" name="eliminacion" />
    <span>Eliminaci贸n</span>
  </label>

  <!-- Bot贸n submit -->
  <button type="submit"
          class="w-full bg-linear-to-r from-[#046BB4] to-[#4484B4] text-white py-3 px-4 rounded-lg font-semibold
                 shadow-md hover:shadow-glow transform transition-all duration-300
                 hover:scale-[1.05] active:scale-[0.95]
                 focus:outline-none focus:ring-2 focus:ring-[#046BB4] focus:ring-offset-2
                 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none">
    {{ formData.id ? ' Guardar cambios' : ' Crear API Key' }}
  </button>
</form>
